{"ast":null,"code":"var _jsxFileName = \"D:\\\\code\\\\h\\u1EC7 th\\u1ED1ng ph\\xE2n t\\xE1n\\\\web-thu-vien-mern-stack-main\\\\front-end\\\\src\\\\Pages\\\\Dashboard\\\\Admin\\\\Components\\\\Return.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport \"../AdminDashboard.css\";\nimport axios from \"axios\";\nimport { Dropdown } from 'semantic-ui-react';\nimport '../../Member/MemberDashboard.css';\nimport moment from \"moment\";\nimport { AuthContext } from '../../../../Context/AuthContext';\nimport { Select, Form, Button } from 'antd';\nimport TransController from '../../../../Controller/TransactionController';\nimport UserController from '../../../../Controller/UserController';\nimport BookController from '../../../../Controller/bookController';\nimport { TableContainer, TablePagination, Paper } from '@material-ui/core';\nconst {\n  Option\n} = Select;\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Return() {\n  _s();\n  const socket = io('http://localhost:8888');\n  const API_URL = process.env.REACT_APP_API_URL;\n  const {\n    user\n  } = useContext(AuthContext);\n  const [allTransactions, setAllTransactions] = useState([]);\n  const [ExecutionStatus, setExecutionStatus] = useState(null); /* For triggering the tabledata to be updated */\n  const [allMembers, setAllMembers] = useState([]);\n  const [borrowerId, setBorrowerId] = useState(null);\n  const [allTransactionsTrue, setAllTransactionsTrue] = useState([]);\n  const [allTransactionsFalse, setAllTransactionsFalse] = useState([]);\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(10);\n\n  // lay danh sach transaction chua xu ly\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        let transactions;\n        // if (borrowerId === null) {\n        transactions = await TransController.getAllTrans();\n        // } else {\n        //   transactions = await TransController.getTransByUser(borrowerId);\n        // }\n\n        const activeTransactions = transactions.filter(transaction => transaction && transaction.transactionStatus && transaction.transactionStatus === \"True\");\n        setAllTransactionsTrue(activeTransactions);\n        const falseTransactions = transactions.filter(transaction => transaction && transaction.transactionStatus && transaction.transactionStatus === \"False\");\n        setAllTransactionsFalse(falseTransactions);\n      } catch (error) {\n        console.error('Error fetching transactions:', error);\n      }\n    };\n    fetchData(); // Gọi fetchData để lấy dữ liệu\n  }, []); // useEffect sẽ chỉ chạy một lần sau khi render lần đầu tiên\n  const fetchUserTransactions = async userId => {\n    try {\n      const transactions = await TransController.getTransByUser(userId);\n      console.log(\"user trans\", transactions);\n      const activeTransactions = transactions.filter(transaction => transaction && transaction.transactionStatus && transaction.transactionStatus === \"True\");\n      setAllTransactionsTrue(activeTransactions);\n      const falseTransactions = transactions.filter(transaction => transaction && transaction.transactionStatus && transaction.transactionStatus === \"False\");\n      setAllTransactionsFalse(falseTransactions);\n    } catch (error) {\n      console.error('Error fetching user transactions:', error);\n    }\n  };\n  // lay danh sach nguoi dung khong phai la admin\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const allUser = await UserController.getAllUsers();\n        // Lọc danh sách các giao dịch có trạng thái là \"Active\"\n        const Users = allUser.filter(user => user && user.isAdmin !== true);\n        setAllMembers(Users); // Đặt danh sách các giao dịch \"Active\" vào state\n      } catch (error) {\n        console.error('Error fetching transactions:', error);\n      }\n    };\n    fetchData(); // Gọi fetchData để lấy dữ liệu\n  }, []);\n  const handleSelectUser = userId => {\n    setBorrowerId(userId);\n    fetchUserTransactions(userId);\n  };\n  const handleUpdateTransaction = async transactionId => {\n    try {\n      const data = {\n        staff_edit: user.user._id,\n        transactionStatus: \"False\"\n      };\n      // Gọi hàm updateTransaction từ TransController để cập nhật giao dịch\n      const updatedTransaction = await TransController.updateTransaction(transactionId, data);\n      const transactions = await TransController.getAllTrans();\n      // } else {\n      //   transactions = await TransController.getTransByUser(borrowerId);\n      // }\n\n      const activeTransactions = transactions.filter(transaction => transaction && transaction.transactionStatus && transaction.transactionStatus === \"True\");\n      setAllTransactionsTrue(activeTransactions);\n      const falseTransactions = transactions.filter(transaction => transaction && transaction.transactionStatus && transaction.transactionStatus === \"False\");\n      setAllTransactionsFalse(falseTransactions);\n      console.log('Transaction updated:', updatedTransaction);\n      alert('cập nhật thành công 🎉');\n    } catch (error) {\n      console.error('Error updating transaction:', error);\n    }\n  };\n  const convertToIssue = async transactionId => {\n    try {\n      await axios.put(API_URL + \"api/transactions/update-transaction/\" + transactionId, {\n        transactionType: \"Issued\",\n        isAdmin: user.isAdmin\n      });\n      setExecutionStatus(\"Completed\");\n      alert(\"Chuyển trạng thái 'Đã mượn' thành công 🎆\");\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"semanticdropdown returnbook-dropdown\",\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        label: \"\\u0110\\u1ED9c gi\\u1EA3\",\n        name: \"borrowerId\",\n        rules: [{\n          required: true,\n          message: 'Vui lòng chọn độc giả'\n        }],\n        labelStyle: {\n          fontSize: '20px'\n        } // Thêm style cho nhãn\n        ,\n        children: /*#__PURE__*/_jsxDEV(Select, {\n          placeholder: \"Ch\\u1ECDn \\u0111\\u1ED9c gi\\u1EA3\",\n          onChange: handleSelectUser,\n          style: {\n            fontSize: '16px'\n          }\n          // Thêm style cho Select component\n          ,\n          showSearch: true // Thêm tính năng tìm kiếm\n          ,\n          optionFilterProp: \"children\" // Chỉ định thuộc tính cần tìm kiếm trong các option\n          ,\n          filterOption: (input, option) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n          children: allMembers.map(member => /*#__PURE__*/_jsxDEV(Option, {\n            value: member._id,\n            children: member.userFullName\n          }, member._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"dashboard-option-title\",\n      children: \"\\u0110\\xE3 m\\u01B0\\u1EE3n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }, this), allTransactionsTrue.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(TableContainer, {\n        component: Paper,\n        style: {\n          maxWidth: '1160px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"admindashboard-table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"T\\xEAn s\\xE1ch\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Ng\\u01B0\\u1EDDi m\\u01B0\\u1EE3n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"T\\u1EEB ng\\xE0y\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0110\\u1EBFn ng\\xE0y\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Qu\\xE1 h\\u1EA1n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: allTransactionsTrue.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((data, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: data ? data.books : \"N/A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: data ? data.userName : \"N/A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: data ? data.fromDate : \"N/A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: data ? data.toDate : \"N/A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: data ? data.overdue : \"N/A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"primary\",\n                  onClick: () => handleUpdateTransaction(data._id),\n                  children: \"Tr\\u1EA3 s\\xE1ch\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 41\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(TablePagination, {\n        onRowsPerPageChange: e => {\n          setRowsPerPage(parseInt(e.target.value, 10));\n          setPage(0);\n        },\n        component: \"div\",\n        count: allTransactions.length,\n        rowsPerPage: rowsPerPage,\n        page: page,\n        onPageChange: (e, newPage) => setPage(newPage),\n        style: {\n          maxWidth: '1160px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"admindashboard-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"T\\xEAn s\\xE1ch\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Ng\\u01B0\\u1EDDi m\\u01B0\\u1EE3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"T\\u1EEB ng\\xE0y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u0110\\u1EBFn ng\\xE0y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Qu\\xE1 h\\u1EA1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: /*#__PURE__*/_jsxDEV(\"td\", {\n            colSpan: \"5\",\n            children: \"Kh\\xF4ng c\\xF3 giao d\\u1ECBch n\\xE0o \\u0111\\u01B0\\u1EE3c t\\xECm th\\u1EA5y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"dashboard-option-title\",\n      children: \"L\\u1ECBch S\\u1EED\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 13\n    }, this), allTransactionsFalse.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(TableContainer, {\n        component: Paper,\n        style: {\n          maxWidth: '1160px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"admindashboard-table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"T\\xEAn s\\xE1ch\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Ng\\u01B0\\u1EDDi m\\u01B0\\u1EE3n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"T\\u1EEB ng\\xE0y\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0110\\u1EBFn ng\\xE0y\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Qu\\xE1 h\\u1EA1n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: allTransactionsFalse.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((data, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: data ? data.books : \"N/A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: data ? data.userName : \"N/A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: data ? data.fromDate : \"N/A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: data ? data.toDate : \"N/A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: data ? data.overdue : \"N/A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 41\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(TablePagination, {\n        onRowsPerPageChange: e => {\n          setRowsPerPage(parseInt(e.target.value, 10));\n          setPage(0);\n        },\n        component: \"div\",\n        count: allTransactions.length,\n        rowsPerPage: rowsPerPage,\n        page: page,\n        onPageChange: (e, newPage) => setPage(newPage),\n        style: {\n          maxWidth: '1160px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"admindashboard-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"T\\xEAn s\\xE1ch\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Ng\\u01B0\\u1EDDi m\\u01B0\\u1EE3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"T\\u1EEB ng\\xE0y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u0110\\u1EBFn ng\\xE0y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Qu\\xE1 h\\u1EA1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: /*#__PURE__*/_jsxDEV(\"td\", {\n            colSpan: \"5\",\n            children: \"Kh\\xF4ng c\\xF3 giao d\\u1ECBch n\\xE0o \\u0111\\u01B0\\u1EE3c t\\xECm th\\u1EA5y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 9\n  }, this);\n}\n_s(Return, \"7kS7dWpo9Xg41sKTRkQLLy34dYY=\");\n_c = Return;\nexport default Return;\nvar _c;\n$RefreshReg$(_c, \"Return\");","map":{"version":3,"names":["React","useContext","useEffect","useState","axios","Dropdown","moment","AuthContext","Select","Form","Button","TransController","UserController","BookController","TableContainer","TablePagination","Paper","Option","io","jsxDEV","_jsxDEV","Fragment","_Fragment","Return","_s","socket","API_URL","process","env","REACT_APP_API_URL","user","allTransactions","setAllTransactions","ExecutionStatus","setExecutionStatus","allMembers","setAllMembers","borrowerId","setBorrowerId","allTransactionsTrue","setAllTransactionsTrue","allTransactionsFalse","setAllTransactionsFalse","page","setPage","rowsPerPage","setRowsPerPage","fetchData","transactions","getAllTrans","activeTransactions","filter","transaction","transactionStatus","falseTransactions","error","console","fetchUserTransactions","userId","getTransByUser","log","allUser","getAllUsers","Users","isAdmin","handleSelectUser","handleUpdateTransaction","transactionId","data","staff_edit","_id","updatedTransaction","updateTransaction","alert","convertToIssue","put","transactionType","err","children","className","label","name","rules","required","message","labelStyle","fontSize","placeholder","onChange","style","showSearch","optionFilterProp","filterOption","input","option","toLowerCase","indexOf","map","member","value","userFullName","fileName","_jsxFileName","lineNumber","columnNumber","length","component","maxWidth","slice","index","books","userName","fromDate","toDate","overdue","type","onClick","onRowsPerPageChange","e","parseInt","target","count","onPageChange","newPage","colSpan","_c","$RefreshReg$"],"sources":["D:/code/hệ thống phân tán/web-thu-vien-mern-stack-main/front-end/src/Pages/Dashboard/Admin/Components/Return.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport \"../AdminDashboard.css\"\nimport axios from \"axios\"\nimport { Dropdown } from 'semantic-ui-react'\nimport '../../Member/MemberDashboard.css'\nimport moment from \"moment\"\nimport { AuthContext } from '../../../../Context/AuthContext'\nimport { Select, Form, Button } from 'antd';\nimport TransController from '../../../../Controller/TransactionController';\nimport UserController from '../../../../Controller/UserController';\nimport BookController from '../../../../Controller/bookController';\nimport { TableContainer, TablePagination, Paper } from '@material-ui/core';\nconst { Option } = Select;\nimport io from 'socket.io-client';\n\nfunction Return() {\n    const socket = io('http://localhost:8888');\n    const API_URL = process.env.REACT_APP_API_URL\n    const { user } = useContext(AuthContext)\n\n    const [allTransactions, setAllTransactions] = useState([])\n    const [ExecutionStatus, setExecutionStatus] = useState(null) /* For triggering the tabledata to be updated */\n    const [allMembers, setAllMembers] = useState([]);\n    const [borrowerId, setBorrowerId] = useState(null)\n    const [allTransactionsTrue, setAllTransactionsTrue] = useState([])\n    const [allTransactionsFalse, setAllTransactionsFalse] = useState([])\n    const [page, setPage] = useState(0);\n    const [rowsPerPage, setRowsPerPage] = useState(10);\n\n\n    // lay danh sach transaction chua xu ly\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                let transactions;\n                // if (borrowerId === null) {\n                transactions = await TransController.getAllTrans();\n                // } else {\n                //   transactions = await TransController.getTransByUser(borrowerId);\n                // }\n\n                const activeTransactions = transactions.filter(transaction => transaction && transaction.transactionStatus && transaction.transactionStatus === \"True\");\n                setAllTransactionsTrue(activeTransactions);\n                const falseTransactions = transactions.filter(transaction => transaction && transaction.transactionStatus && transaction.transactionStatus === \"False\");\n                setAllTransactionsFalse(falseTransactions);\n            } catch (error) {\n                console.error('Error fetching transactions:', error);\n            }\n        };\n        fetchData();     // Gọi fetchData để lấy dữ liệu\n\n    }, []); // useEffect sẽ chỉ chạy một lần sau khi render lần đầu tiên\n    const fetchUserTransactions = async (userId) => {\n        try {\n            const transactions = await TransController.getTransByUser(userId);\n            console.log(\"user trans\", transactions)\n            const activeTransactions = transactions.filter(transaction => transaction && transaction.transactionStatus && transaction.transactionStatus === \"True\");\n            setAllTransactionsTrue(activeTransactions);\n            const falseTransactions = transactions.filter(transaction => transaction && transaction.transactionStatus && transaction.transactionStatus === \"False\");\n            setAllTransactionsFalse(falseTransactions);\n        } catch (error) {\n            console.error('Error fetching user transactions:', error);\n        }\n    };\n    // lay danh sach nguoi dung khong phai la admin\n    useEffect(() => {\n        const fetchData = async () => {\n\n            try {\n                const allUser = await UserController.getAllUsers();\n                // Lọc danh sách các giao dịch có trạng thái là \"Active\"\n                const Users = allUser.filter(user => user && user.isAdmin !== true);\n                setAllMembers(Users); // Đặt danh sách các giao dịch \"Active\" vào state\n            } catch (error) {\n                console.error('Error fetching transactions:', error);\n            }\n        };\n\n        fetchData(); // Gọi fetchData để lấy dữ liệu\n\n    }, []);\n    const handleSelectUser = (userId) => {\n        setBorrowerId(userId)\n        fetchUserTransactions(userId);\n    };\n    const handleUpdateTransaction = async (transactionId) => {\n        try {\n            const data = {\n                staff_edit: user.user._id,\n                transactionStatus: \"False\"\n            };\n            // Gọi hàm updateTransaction từ TransController để cập nhật giao dịch\n            const updatedTransaction = await TransController.updateTransaction(transactionId, data);\n            const transactions = await TransController.getAllTrans();\n            // } else {\n            //   transactions = await TransController.getTransByUser(borrowerId);\n            // }\n\n            const activeTransactions = transactions.filter(transaction => transaction && transaction.transactionStatus && transaction.transactionStatus === \"True\");\n            setAllTransactionsTrue(activeTransactions);\n            const falseTransactions = transactions.filter(transaction => transaction && transaction.transactionStatus && transaction.transactionStatus === \"False\");\n            setAllTransactionsFalse(falseTransactions);\n            console.log('Transaction updated:', updatedTransaction);\n            alert('cập nhật thành công 🎉');\n        } catch (error) {\n            console.error('Error updating transaction:', error);\n        }\n    };\n\n\n\n    const convertToIssue = async (transactionId) => {\n        try {\n            await axios.put(API_URL + \"api/transactions/update-transaction/\" + transactionId, {\n                transactionType: \"Issued\",\n                isAdmin: user.isAdmin\n            })\n            setExecutionStatus(\"Completed\");\n            alert(\"Chuyển trạng thái 'Đã mượn' thành công 🎆\")\n        }\n        catch (err) {\n            console.log(err)\n        }\n    }\n\n\n    return (\n        <div>\n            <div className='semanticdropdown returnbook-dropdown'>\n                <Form\n                    label=\"Độc giả\"\n                    name=\"borrowerId\"\n                    rules={[{ required: true, message: 'Vui lòng chọn độc giả' }]}\n                    labelStyle={{ fontSize: '20px' }} // Thêm style cho nhãn\n                >\n                    <Select\n                        placeholder=\"Chọn độc giả\"\n                        onChange={handleSelectUser}\n                        style={{ fontSize: '16px' }}\n                        // Thêm style cho Select component\n                        showSearch  // Thêm tính năng tìm kiếm\n                        optionFilterProp=\"children\" // Chỉ định thuộc tính cần tìm kiếm trong các option\n                        filterOption={(input, option) =>\n                            option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                        }\n                    >\n                        {allMembers.map(member => (\n                            <Option key={member._id} value={member._id}>{member.userFullName}</Option>\n                        ))}\n                    </Select>\n\n\n                </Form>\n            </div>\n            <p className=\"dashboard-option-title\">Đã mượn</p>\n            {/* <table className=\"admindashboard-table\">\n                <tr>\n                    <th>Tên sách</th>\n                    <th>Người mượn</th>\n                    <th>Từ ngày</th>\n                    <th>Đến ngày</th>\n                    <th>Quá hạn</th>\n                    <th></th>\n                </tr>\n                {Array.isArray(allTransactionsTrue) && allTransactionsTrue.length > 0 ? (\n                    allTransactionsTrue.map((data, index) => (\n                        <tr key={index}>\n                            <td>{data ? data.books : \"N/A\"}</td>\n                            <td>{data ? data.userName : \"N/A\"}</td>\n                            <td>{data ? data.fromDate : \"N/A\"}</td>\n                            <td>{data ? data.toDate : \"N/A\"}</td>\n                            <td>{data ? data.overdue : \"N/A\"}</td>\n\n                            <td>\n                                <button onClick={() => handleUpdateTransaction(data._id)}>\n                                    Trả sách\n                                </button>\n                            </td>\n                        </tr>\n                    ))\n                ) : (\n                    <tr>\n                        <td colSpan=\"5\">Không có giao dịch nào được tìm thấy</td>\n                    </tr>\n                )}\n            </table> */}\n            {allTransactionsTrue.length > 0 ? (\n                <>\n                    <TableContainer component={Paper} style={{ maxWidth: '1160px' }}>\n\n                        <table className=\"admindashboard-table\">\n                            <thead>\n                                <tr>\n                                    <th>Tên sách</th>\n                                    <th>Người mượn</th>\n                                    <th>Từ ngày</th>\n                                    <th>Đến ngày</th>\n                                    <th>Quá hạn</th>\n                                    <th></th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {allTransactionsTrue.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((data, index) => (\n                                    <tr key={index}>\n                                        <td>{data ? data.books : \"N/A\"}</td>\n                                        <td>{data ? data.userName : \"N/A\"}</td>\n                                        <td>{data ? data.fromDate : \"N/A\"}</td>\n                                        <td>{data ? data.toDate : \"N/A\"}</td>\n                                        <td>{data ? data.overdue : \"N/A\"}</td>\n\n                                        <td>\n                                            <Button type=\"primary\" onClick={() => handleUpdateTransaction(data._id)}>\n                                                Trả sách\n                                            </Button>\n                                        </td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                    </TableContainer>\n                    <TablePagination\n                        onRowsPerPageChange={(e) => {\n                            setRowsPerPage(parseInt(e.target.value, 10))\n                            setPage(0)\n                        }}\n                        component=\"div\"\n                        count={allTransactions.length}\n                        rowsPerPage={rowsPerPage}\n                        page={page}\n                        onPageChange={(e, newPage) => setPage(newPage)}\n                        style={{ maxWidth: '1160px' }}\n                    />\n                </>\n            ) : (\n                <table className=\"admindashboard-table\">\n                    <thead>\n                        <tr>\n                            <th>Tên sách</th>\n                            <th>Người mượn</th>\n                            <th>Từ ngày</th>\n                            <th>Đến ngày</th>\n                            <th>Quá hạn</th>\n                            <th></th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td colSpan=\"5\">Không có giao dịch nào được tìm thấy</td>\n                        </tr>\n                    </tbody>\n                </table>\n            )}\n            <p className=\"dashboard-option-title\">Lịch Sử</p>\n            {allTransactionsFalse.length > 0 ? (\n                <>\n                    <TableContainer component={Paper} style={{ maxWidth: '1160px' }}>\n\n                        <table className=\"admindashboard-table\">\n                            <thead>\n                                <tr>\n                                    <th>Tên sách</th>\n                                    <th>Người mượn</th>\n                                    <th>Từ ngày</th>\n                                    <th>Đến ngày</th>\n                                    <th>Quá hạn</th>\n\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {allTransactionsFalse.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((data, index) => (\n                                    <tr key={index}>\n                                        <td>{data ? data.books : \"N/A\"}</td>\n                                        <td>{data ? data.userName : \"N/A\"}</td>\n                                        <td>{data ? data.fromDate : \"N/A\"}</td>\n                                        <td>{data ? data.toDate : \"N/A\"}</td>\n                                        <td>{data ? data.overdue : \"N/A\"}</td>\n\n\n\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                    </TableContainer>\n                    <TablePagination\n                        onRowsPerPageChange={(e) => {\n                            setRowsPerPage(parseInt(e.target.value, 10))\n                            setPage(0)\n                        }}\n                        component=\"div\"\n                        count={allTransactions.length}\n                        rowsPerPage={rowsPerPage}\n                        page={page}\n                        onPageChange={(e, newPage) => setPage(newPage)}\n                        style={{ maxWidth: '1160px' }}\n                    />\n                </>\n            ) : (\n                <table className=\"admindashboard-table\">\n                    <thead>\n\n                        <tr>\n                            <th>Tên sách</th>\n                            <th>Người mượn</th>\n                            <th>Từ ngày</th>\n                            <th>Đến ngày</th>\n                            <th>Quá hạn</th>\n                        </tr>\n\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td colSpan=\"5\">Không có giao dịch nào được tìm thấy</td>\n                        </tr>\n                    </tbody>\n                </table>\n            )}\n        </div>\n    )\n}\n\nexport default Return\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}