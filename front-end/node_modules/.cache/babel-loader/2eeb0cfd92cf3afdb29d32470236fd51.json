{"ast":null,"code":"import decode from 'jwt-decode';\nexport const userService = {\n  loggedIn: loggedIn,\n  setToken: setToken,\n  isTokenExpired: isTokenExpired,\n  getToken: getToken,\n  logout: logout\n};\nfunction loggedIn() {\n  const token = this.getToken();\n  // token exists && is not expired\n  return !!token && !this.isTokenExpired(token);\n}\nfunction isTokenExpired(token) {\n  try {\n    const decoded = decode(token);\n    if (decoded.exp < Date.now() / 1000) {\n      // Checking if token is expired.\n      return true;\n    } else return false;\n  } catch (err) {\n    console.log(\"expired check failed! Line 42: AuthService.js\");\n    return false;\n  }\n}\nfunction setToken(idToken) {\n  localStorage.setItem('id_token', idToken);\n}\nfunction getToken() {\n  return localStorage.getItem('id_token');\n}\nfunction logout() {\n  localStorage.removeItem('id_token');\n}","map":{"version":3,"names":["decode","userService","loggedIn","setToken","isTokenExpired","getToken","logout","token","decoded","exp","Date","now","err","console","log","idToken","localStorage","setItem","getItem","removeItem"],"sources":["D:/code/hệ thống phân tán/web-thu-vien-mern-stack-main/front-end/src/services/authentication.service.js"],"sourcesContent":["import decode from 'jwt-decode';\r\n\r\nexport const userService = {\r\n    loggedIn:loggedIn,\r\n    setToken:setToken,\r\n    isTokenExpired:isTokenExpired,\r\n    getToken:getToken,\r\n    logout:logout,\r\n};\r\n\r\nfunction loggedIn() {\r\n    const token = this.getToken()\r\n    // token exists && is not expired\r\n    return !!token && !this.isTokenExpired(token)\r\n}\r\n\r\nfunction isTokenExpired(token) {\r\n        try {\r\n            const decoded = decode(token);\r\n            if (decoded.exp < Date.now() / 1000) { // Checking if token is expired.\r\n                return true;\r\n            }\r\n            else\r\n                return false;\r\n        }\r\n        catch (err) {\r\n            console.log(\"expired check failed! Line 42: AuthService.js\");\r\n            return false;\r\n        }\r\n    }\r\n\r\nfunction setToken(idToken) {\r\n    localStorage.setItem('id_token', idToken)\r\n}\r\n\r\nfunction getToken() {\r\n    return localStorage.getItem('id_token')\r\n}\r\n\r\nfunction logout() {\r\n    localStorage.removeItem('id_token');\r\n}\r\n"],"mappings":"AAAA,OAAOA,MAAM,MAAM,YAAY;AAE/B,OAAO,MAAMC,WAAW,GAAG;EACvBC,QAAQ,EAACA,QAAQ;EACjBC,QAAQ,EAACA,QAAQ;EACjBC,cAAc,EAACA,cAAc;EAC7BC,QAAQ,EAACA,QAAQ;EACjBC,MAAM,EAACA;AACX,CAAC;AAED,SAASJ,QAAQA,CAAA,EAAG;EAChB,MAAMK,KAAK,GAAG,IAAI,CAACF,QAAQ,CAAC,CAAC;EAC7B;EACA,OAAO,CAAC,CAACE,KAAK,IAAI,CAAC,IAAI,CAACH,cAAc,CAACG,KAAK,CAAC;AACjD;AAEA,SAASH,cAAcA,CAACG,KAAK,EAAE;EACvB,IAAI;IACA,MAAMC,OAAO,GAAGR,MAAM,CAACO,KAAK,CAAC;IAC7B,IAAIC,OAAO,CAACC,GAAG,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,IAAI,EAAE;MAAE;MACnC,OAAO,IAAI;IACf,CAAC,MAEG,OAAO,KAAK;EACpB,CAAC,CACD,OAAOC,GAAG,EAAE;IACRC,OAAO,CAACC,GAAG,CAAC,+CAA+C,CAAC;IAC5D,OAAO,KAAK;EAChB;AACJ;AAEJ,SAASX,QAAQA,CAACY,OAAO,EAAE;EACvBC,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEF,OAAO,CAAC;AAC7C;AAEA,SAASV,QAAQA,CAAA,EAAG;EAChB,OAAOW,YAAY,CAACE,OAAO,CAAC,UAAU,CAAC;AAC3C;AAEA,SAASZ,MAAMA,CAAA,EAAG;EACdU,YAAY,CAACG,UAAU,CAAC,UAAU,CAAC;AACvC"},"metadata":{},"sourceType":"module"}